language: php
sudo: false

matrix:
    fast_finish: true
    include:
        - php: 7.1
          env:
            - DEPS=lowest
        - php: 7.1
          env:
            - CS_CHECK=true
            - ANALYZE=true
        - php: 7.2
        - php: 7.3
        - php: nightly
    allow_failures:
        - php: 7.3
        - php: nightly

install:
    - composer self-update
    - composer update
    - chmod +x ./run-tests.sh

script:
    - composer test
    - if [[ $ANALYZE == 'true' ]]; then composer analyze ; fi
    - if [[ $CS_CHECK == 'true' ]]; then composer cs-check ; fi